â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ ACTUALIZACIÃ“N: TEMÃTICAS Y OBJETIVOS EN BASE RAG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Fecha: 11 de noviembre de 2025

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š PROBLEMA RESUELTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES:
âŒ La base RAG NO capturaba el objetivo central de las obras
âŒ NO se identificaban las temÃ¡ticas principales tratadas
âŒ NO habÃ­a resumen ejecutivo de quÃ© trata cada documento
âŒ Los informes carecÃ­an de contexto sobre el propÃ³sito de la obra

AHORA:
âœ… 4 nuevas columnas agregadas a metadatos.db
âœ… Extractor automÃ¡tico de objetivos y temÃ¡ticas
âœ… AnÃ¡lisis inteligente usando patrones lingÃ¼Ã­sticos
âœ… IntegraciÃ³n completa en informes de Gemini

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ NUEVAS COLUMNAS AGREGADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. **objetivo_central** (TEXT)
   - Detecta automÃ¡ticamente el objetivo/propÃ³sito de la obra
   - Busca patrones como "el objetivo es", "nos proponemos", etc.
   - Si no encuentra explÃ­cito, lo infiere del tÃ­tulo y contenido

2. **tematicas_principales** (TEXT - JSON array)
   - Lista de 3-5 temÃ¡ticas principales tratadas
   - Extrae de:
     * TÃ­tulos de capÃ­tulos y secciones
     * Frecuencia de tÃ©rminos jurÃ­dicos especializados
     * Ãreas temÃ¡ticas identificadas (procesal, civil, etc.)

3. **palabras_tema** (TEXT - JSON array)
   - Top 30 palabras temÃ¡ticas mÃ¡s frecuentes
   - Filtradas de stopwords comunes
   - Representan el vocabulario especializado del autor

4. **resumen_ejecutivo** (TEXT)
   - SÃ­ntesis de 2-3 oraciones sobre el contenido
   - Combina objetivo + temÃ¡ticas + primeras oraciones significativas
   - MÃ¡ximo 500 caracteres

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” CÃ“MO FUNCIONA EL EXTRACTOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**Clase: ExtractorTematicasObjetivos**

1. DETECCIÃ“N DE OBJETIVOS:
   - Busca patrones lingÃ¼Ã­sticos en las primeras 5000 caracteres:
     * "el objetivo/propÃ³sito/fin de este trabajo es..."
     * "nos proponemos..."
     * "este trabajo busca/pretende/intenta..."
     * "tiene como objetivo..."
   - Si no encuentra explÃ­cito, infiere del tÃ­tulo

2. DETECCIÃ“N DE TEMÃTICAS:
   - Extrae tÃ­tulos de capÃ­tulos con regex patterns
   - Identifica Ã¡reas jurÃ­dicas por frecuencia de tÃ©rminos:
     * Procesal (proceso, tutela, medida cautelar...)
     * Civil (contrato, responsabilidad, daÃ±o...)
     * Constitucional (derechos fundamentales, garantÃ­as...)
     * Penal, Administrativo, Comercial, Laboral
   - Retorna top 5 temÃ¡ticas mÃ¡s relevantes

3. PALABRAS TEMA:
   - Extrae palabras de 4+ caracteres
   - Filtra stopwords (el, la, de, que, etc.)
   - Cuenta frecuencias y retorna top 30

4. RESUMEN EJECUTIVO:
   - Extrae primeras 2 oraciones significativas (50-300 chars)
   - O combina: "La obra tiene como objetivo [X]. Aborda [temas]."

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‚ ARCHIVOS CREADOS/MODIFICADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. **agregar_tematicas_objetivos.py** (NUEVO - 300+ lÃ­neas)
   - Script principal de extracciÃ³n
   - Clase ExtractorTematicasObjetivos
   - Funciones:
     * agregar_columnas_bd() - Altera tabla SQL
     * actualizar_documentos_existentes() - Procesa todos los PDFs
     * detectar_objetivo_central()
     * detectar_tematicas_principales()
     * extraer_palabras_tema()
     * generar_resumen_ejecutivo()

2. **generador_informes_gemini.py** (MODIFICADO)
   - Agregada secciÃ³n en prompt (lÃ­neas ~490-530):
     * Muestra objetivo central de la obra
     * Lista temÃ¡ticas principales (top 5)
     * Incluye resumen ejecutivo
   - InstrucciÃ³n explÃ­cita a Gemini:
     "El objetivo central y las temÃ¡ticas son EL CORAZÃ“N de la obra.
      Debes mencionarlos y relacionarlos con las mÃ©tricas cognitivas."

3. **metadatos.db** (MODIFICADO)
   - Tabla perfiles_cognitivos ahora tiene 55 columnas (antes 51)
   - Las 9 obras existentes ya fueron procesadas y actualizadas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ CÃ“MO USAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**PARA DOCUMENTOS NUEVOS:**
El sistema procesarÃ¡ automÃ¡ticamente estas columnas cuando ejecutes:
```powershell
python procesar_todo.py
```

**PARA ACTUALIZAR DOCUMENTOS EXISTENTES:**
```powershell
python colaborative/scripts/agregar_tematicas_objetivos.py
```

**PARA GENERAR INFORME CON NUEVOS DATOS:**
```powershell
$env:PYTHONIOENCODING="utf-8"
python colaborative/scripts/generador_informes_gemini.py "NOMBRE AUTOR"
```

O desde la web: botÃ³n "ğŸ¤– Informe Gemini"

**PARA CONSULTAR DATOS EXTRAÃDOS:**
```powershell
python -c "import sqlite3, json; conn=sqlite3.connect('colaborative/bases_rag/cognitiva/metadatos.db'); c=conn.cursor(); c.execute('SELECT autor, objetivo_central, tematicas_principales FROM perfiles_cognitivos'); [print(f'{r[0]}:\nObjetivo: {r[1]}\nTemas: {r[2]}\n') for r in c.fetchall()]"
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š RESULTADOS ACTUALES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… 9 documentos procesados exitosamente:
   1. Noelia Malvina CofrÃ¨ - Amparos en Salud y Discapacidad
   2. Citlalli - ABC de Recursos e Incidentes en Amparo
   3. Daniel Esteban Brola - TeorÃ­a y PrÃ¡ctica del Amparo
   4. Carlos Pandiella Molina - Tutela Preventiva
   5. Ariel Ariza - Comodato
   6. Eduardo Barreira Delfino - Contratos de Leasing
   7. Leonardo Nahuel Manfredi - Contratos de Servicios
   8. Luciana B. Scotti - Contratos ElectrÃ³nicos
   9. Carolina Iud - Contratos Internacionales

Cada uno ahora tiene:
- Objetivo central identificado
- 3-5 temÃ¡ticas principales
- 30 palabras temÃ¡ticas clave
- Resumen ejecutivo

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ IMPACTO EN LOS INFORMES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES:
"El autor presenta alto formalismo jurÃ­dico (0.85)..."
â†’ Abstracto, sin contexto

AHORA:
"El autor presenta alto formalismo jurÃ­dico (0.85) orientado especÃ­ficamente
a su objetivo de 'analizar la tutela preventiva en el derecho argentino'.
Este enfoque formal es coherente con las temÃ¡ticas tratadas: Tutela Preventiva,
Derecho Procesal, y Medidas Cautelares, donde la precisiÃ³n normativa es crucial..."
â†’ Concreto, contextualizado, con propÃ³sito claro

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ MEJORAS FUTURAS POSIBLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. **Mejorar detecciÃ³n de objetivos:**
   - Usar anÃ¡lisis semÃ¡ntico (embeddings)
   - Entrenar modelo especÃ­fico para textos jurÃ­dicos

2. **ClasificaciÃ³n temÃ¡tica mÃ¡s sofisticada:**
   - TaxonomÃ­a jurÃ­dica completa (no solo 7 Ã¡reas)
   - DetecciÃ³n de sub-temÃ¡ticas (ej: dentro de Civil â†’ Contratos â†’ Leasing)

3. **IntegraciÃ³n con procesamiento automÃ¡tico:**
   - Llamar extractor desde procesar_todo.py
   - Actualizar automÃ¡ticamente cuando se agregan PDFs

4. **VisualizaciÃ³n en la web:**
   - Mostrar objetivo y temÃ¡ticas en tarjetas de autores
   - Filtrar autores por temÃ¡tica
   - Nube de palabras temÃ¡ticas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… RESUMEN EJECUTIVO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

La base RAG ahora captura y almacena:
âœ… El propÃ³sito/objetivo central de cada obra
âœ… Las 3-5 temÃ¡ticas principales tratadas
âœ… Vocabulario temÃ¡tico especializado (top 30 palabras)
âœ… Resumen ejecutivo de 2-3 oraciones

Esto permite que Gemini genere informes:
âœ… MÃS CONTEXTUALIZADOS - Sabe de quÃ© trata la obra
âœ… MÃS RELEVANTES - Relaciona mÃ©tricas con el objetivo especÃ­fico
âœ… MÃS COMPLETOS - Menciona explÃ­citamente las temÃ¡ticas tratadas
âœ… MÃS ÃšTILES - El lector entiende inmediatamente el alcance de la obra

Los informes ya no son abstracciones vacÃ­as, sino anÃ¡lisis fundamentados
que sitÃºan al autor y su obra en un contexto temÃ¡tico especÃ­fico.
